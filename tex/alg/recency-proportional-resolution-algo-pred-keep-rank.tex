\begin{algorithm}
\caption{Recency-proportional Stratum Retention Predicate}
\label{alg:recency-proportional-resolution-algo-pred-keep-rank}
\begin{algorithmic}[1]
    \STATE $\text{resolution} \gets \text{spec.GetRecencyProportionalResolution()}$
    \STATE $\text{cur\_rank} \gets 0$
    \STATE $last\_rank \gets \texttt{num\_\text{strata}\_\text{deposited}} - 1$
    \WHILE{$last\_rank - \text{cur\_rank} > \text{resolution}$}
        \STATE \textbf{yield} $\text{cur\_rank}$
        \STATE $\text{cur\_rank} \gets \text{cur\_rank} + \texttt{calc\_provided\_uncertainty(} \text{resolution}, \text{last\_rank - cur\_rank} \texttt{)}$
    \ENDWHILE
    \FOR{$i = \max(\text{last\_rank} - \text{resolution}, 0)$ \textbf{to} $\texttt{num\_\text{strata}\_\text{deposited}} - 1$}
        \STATE \textbf{yield} $i$
    \ENDFOR
\end{algorithmic}
\end{algorithm}
