\begin{algorithm}
\caption{Depth-proportional Resolution Stratum Retention Predicate}
\label{alg:depth-proportional-resolution-algo-pred-keep-rank}
\begin{algorithmic}[1]
    \STATE{ $\text{uncertainty} \gets \texttt{calc\_provided\_uncertainty(} \text{spec.GetDepthProportionalResolution()}, \texttt{num\_\text{strata}\_\text{deposited}} \texttt{)}$ }
    \FOR{$i = 0$ \textbf{to} $\texttt{num\_\text{strata}\_\text{deposited}} - 1$ \textbf{step} $\text{uncertainty}$}
        \STATE \textbf{yield} $i$
    \ENDFOR
    \STATE $last\_rank \gets \texttt{num\_\text{strata}\_\text{deposited}} - 1$
    \IF{$last\_rank > 0$ \textbf{and} $last\_rank \mod \text{uncertainty} \neq 0$}
        \STATE \textbf{yield} $last\_rank$
    \ENDIF
\end{algorithmic}
\end{algorithm}
